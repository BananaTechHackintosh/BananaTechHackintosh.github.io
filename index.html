<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Title & description for search -->
  <title>Banana Tech Hackintosh — OpenCore Guide & Support</title>
  <meta name="description" content="Banana Tech Hackintosh: beginner-friendly OpenCore guide to install macOS on your PC. Simple steps, FAQs, EFI setup, and troubleshooting support." />
  <meta name="keywords" content="Hackintosh, macOS on PC, OpenCore, Banana Tech Hackintosh, EFI setup, macOS installer, Hackintosh tutorial, build Hackintosh, install macOS on Windows PC, beginner Hackintosh, OpenCore Simplify, ProperTree, USBToolBox, Dortania alternative, Hackintosh support" />
  <link rel="canonical" href="https://bananatechhackintosh.github.io/" />

  <!-- Favicons -->
  <link rel="icon" href="logo.png" type="image/png">
  <link rel="shortcut icon" href="logo.png" type="image/png">
  <link rel="apple-touch-icon" href="logo.png">

  <!-- Open Graph (social preview) -->
  <meta property="og:title" content="Banana Tech Hackintosh" />
  <meta property="og:description" content="Step-by-step Hackintosh guide with OpenCore, EFI setup, and troubleshooting support." />
  <meta property="og:image" content="https://bananatechhackintosh.github.io/logo.png" />
  <meta property="og:url" content="https://bananatechhackintosh.github.io" />
  <meta property="og:type" content="website" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Banana Tech Hackintosh" />
  <meta name="twitter:description" content="Step-by-step Hackintosh guide with OpenCore, EFI setup, and troubleshooting support." />
  <meta name="twitter:image" content="https://bananatechhackintosh.github.io/logo.png" />

  <!-- Structured Data for Google -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Banana Tech Hackintosh",
    "url": "https://bananatechhackintosh.github.io",
    "publisher": {
      "@type": "Organization",
      "name": "Banana Tech",
      "logo": {
        "@type": "ImageObject",
        "url": "https://bananatechhackintosh.github.io/logo.png"
      }
    }
  }
  </script>

  <!-- Optional analytics (kept as-is if you use it) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-PM2BNW0Q6Z"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date()); gtag('config','G-PM2BNW0Q6Z');
  </script>

  <!-- Optional AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7496234429485138" crossorigin="anonymous"></script>

  <style>
    :root{
      --bg: #0b1020;
      --bg-2:#0b1226;
      --card:#0f172a;
      --text:#e6edf3;
      --muted:#9aa4b2;
      --line:rgba(255,255,255,.10);
      --accent:#ffd84a;
      --accent-2:#ffb300;
      --ring:rgba(255,216,74,.45);
      --shadow:0 10px 30px rgba(0,0,0,.35);
      --radius:18px;
      --speed:340ms;
      --ease:cubic-bezier(.22,1,.36,1);
    }
    *{box-sizing:border-box}
    html,body{margin:0}
    html{scroll-behavior:smooth}
    body{
      font-family: ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,"Noto Sans",sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 800px at 10% -10%, #111827 0%, transparent 40%),
        radial-gradient(1000px 600px at 110% 10%, rgba(255,216,74,.08), transparent 60%),
        linear-gradient(180deg,var(--bg) 0%, var(--bg-2) 60%, var(--bg) 100%);
      -webkit-font-smoothing:antialiased;
      line-height:1.65;
      overflow-x:hidden;
    }
    a{color:inherit;text-decoration:none}
    .container{max-width:1200px;margin:0 auto;padding:0 20px}

    /* Header */
    .header{position:sticky;top:0;z-index:40;backdrop-filter:saturate(140%) blur(10px);
      background:linear-gradient(180deg,rgba(8,12,22,.72),rgba(8,12,22,.48));
      border-bottom:1px solid var(--line)}
    .nav{display:flex;align-items:center;justify-content:space-between;padding:14px 0}
    .brand{display:flex;align-items:center;gap:12px}
    .brand img{width:40px;height:40px;border-radius:12px;background:#0f1628;box-shadow:var(--shadow)}
    .brand span{font-weight:900;letter-spacing:.25px}
    .nav a{opacity:.8;font-weight:700;margin:0 8px;position:relative}
    .nav a.active{opacity:1}
    .nav a.active:after{content:"";position:absolute;left:0;right:0;bottom:-6px;height:2px;border-radius:2px;background:linear-gradient(90deg,#ffd84a,#ffb300)}

    /* Buttons */
    .btn,.pill{display:inline-flex;align-items:center;gap:.6ch;border:none;cursor:pointer;font-weight:800;letter-spacing:.2px}
    .btn{background:linear-gradient(100deg,var(--accent),var(--accent-2));color:#000;padding:10px 16px;border-radius:12px;box-shadow:0 8px 24px rgba(255,216,74,.28);transition:transform .2s,box-shadow .2s}
    .btn:hover{transform:translateY(-1px);box-shadow:0 14px 36px rgba(255,216,74,.34)}
    .pill{border:1px solid rgba(229,231,235,.18);color:#e5e7eb;padding:8px 12px;border-radius:999px}

    /* Sections */
    .hero{padding:90px 0 36px;position:relative}
    .hero-glow{position:absolute;inset:-120px -60px auto -60px;height:420px;z-index:0;pointer-events:none;
      background:radial-gradient(600px 280px at 15% 40%,rgba(255,216,74,.18),transparent 60%),
                 radial-gradient(600px 280px at 85% 20%,rgba(255,179,0,.18),transparent 60%);
      filter:blur(24px) saturate(130%)}
    .hero-grid{display:grid;grid-template-columns:1.2fr .8fr;gap:32px;align-items:center}
    @media(max-width:900px){.hero-grid{grid-template-columns:1fr}}
    .kicker{color:var(--accent);font-weight:900;letter-spacing:.06em;text-transform:uppercase;font-size:.8rem}
    .card{background:linear-gradient(180deg,rgba(255,255,255,.05),transparent);border:1px solid rgba(229,231,235,.10);border-radius:var(--radius);padding:20px}
    .badges{display:flex;flex-wrap:wrap;gap:10px;margin-top:16px}
    .badge{border:1px solid rgba(229,231,235,.16);padding:6px 10px;border-radius:999px;font-size:.85rem}

    .section{padding:28px 0}
    .grid{display:grid;gap:18px}
    .cols-3{grid-template-columns:repeat(3,1fr)}
    @media(max-width:900px){.cols-3{grid-template-columns:1fr}}
    .feature{display:flex;gap:14px;align-items:flex-start}
    .icon{width:36px;height:36px;border-radius:10px;background:#1f2937;display:grid;place-items:center;flex:0 0 36px}

    /* FAQ — restored design + upgrades */
    .faq-wrap{display:grid;gap:14px}
    .faq-toolbar{display:flex;flex-wrap:wrap;gap:10px;align-items:center;margin-bottom:10px}
    .chip{border:1px solid rgba(229,231,235,.18);padding:6px 10px;border-radius:999px;font-weight:700;opacity:.9;cursor:pointer;transition:.2s}
    .chip.active,.chip:hover{background:rgba(255,255,255,.06)}
    .search{background:#0f1628;border:1px solid rgba(229,231,235,.16);border-radius:12px;color:#fff;padding:10px 12px;min-width:260px}
    .faq-item{border:1px solid rgba(229,231,235,.14);border-radius:14px;overflow:hidden;background:linear-gradient(180deg,rgba(255,255,255,.03),transparent)}
    .faq-q{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:14px 16px;cursor:pointer;user-select:none}
    .faq-q h3{margin:0;font-size:1rem}
    .faq-q .meta{display:flex;gap:8px;align-items:center;font-size:.85rem;color:var(--muted)}
    .plus{width:28px;height:28px;border-radius:8px;display:grid;place-items:center;border:1px solid rgba(229,231,235,.16);flex:0 0 28px}
    .faq-content{max-height:0;opacity:.75;overflow:hidden;transition:max-height var(--speed) var(--ease),opacity var(--speed) var(--ease),filter var(--speed) var(--ease);padding:0 16px}
    .faq-item.open .faq-content{opacity:1;filter:none}
    .faq-a{padding:0 0 14px 0}
    mark{background:rgba(255,216,74,.22);padding:0 .15em;border-radius:3px}

    /* Contact (mail) — restored panel styling */
    .contact-card{
      position:relative;
      border-radius:20px;
      padding:1px;
      background:linear-gradient(135deg, rgba(255,216,74,.40), rgba(255,179,0,.20), rgba(255,255,255,.08));
      box-shadow:0 20px 50px rgba(0,0,0,.35);
    }
    .contact-inner{
      background:#0c1426;
      border-radius:19px;
      padding:20px;
      border:1px solid rgba(229,231,235,.08);
    }
    .contact-grid{display:grid;grid-template-columns:1.1fr .9fr;gap:18px}
    @media(max-width:900px){.contact-grid{grid-template-columns:1fr}}
    .form{display:grid;gap:12px}
    label{font-weight:700}
    .input,textarea{
      background:#0f1628;border:1px solid rgba(229,231,235,.16);border-radius:12px;color:#fff;padding:12px 14px;width:100%;
      transition:border-color .2s,box-shadow .2s
    }
    .input:focus,textarea:focus{outline:none;border-color:rgba(255,216,74,.35);box-shadow:0 0 0 3px var(--ring)}
    .field-row{display:grid;gap:12px;grid-template-columns:1fr 1fr}
    @media(max-width:700px){.field-row{grid-template-columns:1fr}}
    .helper{color:var(--muted);font-size:.9rem}
    .counter{color:var(--muted);font-size:.85rem;justify-self:end}
    .status{font-size:.95rem}
    .status.ok{color:#b7ffb3}
    .status.err{color:#ffb3b3}
    .send{display:inline-flex;align-items:center;gap:.6ch}
    .spin{width:14px;height:14px;border:2px solid rgba(0,0,0,.4);border-top-color:rgba(0,0,0,.9);border-radius:50%;animation:spin .85s linear infinite;display:none}
    .sending .spin{display:inline-block}
    @keyframes spin{to{transform:rotate(360deg)}}

    /* Footer and misc */
    footer{padding:28px 0;color:#9ca3af}
    .to-top{position:fixed;right:18px;bottom:18px;z-index:30;background:linear-gradient(100deg,var(--accent),var(--accent-2));color:#000;font-weight:900;width:46px;height:46px;border-radius:12px;display:grid;place-items:center;box-shadow:0 12px 30px rgba(0,0,0,.35);transform:translateY(20px);opacity:0;pointer-events:none;transition:.3s var(--ease)}
    .to-top.show{transform:none;opacity:1;pointer-events:auto}
  </style>
</head>
<body>
  <header class="header">
    <div class="container nav">
      <a class="brand" href="#top"><img src="logo.png" alt="Banana Tech"><span>Banana Tech</span></a>
      <nav>
        <a class="active" href="#guide">Highlights</a>
        <a href="#faq">FAQ</a>
        <a href="#ask">Contact</a>
        <!-- Preview button now redirects to guide.html -->
        <a class="pill" href="guide.html">Preview Guide</a>
        <a class="btn" href="BananaTech-Hackintosh-Guide.pdf" target="_blank" rel="noopener">Open Full Guide</a>
        <a class="btn" href="BananaTech-Hackintosh-Guide.pdf" download>Download PDF</a>
      </nav>
    </div>
  </header>

  <main id="top" class="container">
    <section class="hero">
      <div class="hero-glow" aria-hidden="true"></div>
      <div class="hero-grid">
        <div>
          <div class="kicker">Banana Tech</div>
          <h1 style="margin:.25rem 0 .6rem;line-height:1.12;font-size:clamp(2rem,3.6vw,3.2rem)">Hackintosh guide that actually makes sense</h1>
          <p style="color:#cbd5e1;max-width:60ch">Step by step PDF for OpenCore, EFI setup, and install. When you hit a snag, our restored FAQ and the contact panel below are ready.</p>
          <div class="badges">
            <div class="badge"><strong>Windows Vista+</strong></div>
            <div class="badge">16 GB+ USB</div>
            <div class="badge">Ethernet recommended</div>
          </div>
          <div style="margin-top:16px;display:flex;gap:10px;flex-wrap:wrap">
            <!-- Preview button now redirects to guide.html -->
            <a class="pill" href="guide.html">Preview Guide</a>
            <a class="btn" href="BananaTech-Hackintosh-Guide.pdf" target="_blank" rel="noopener">Open Full Guide</a>
            <a class="btn" href="BananaTech-Hackintosh-Guide.pdf" download>Download PDF</a>
          </div>
        </div>

        <div class="card">
          <h3 style="margin-top:0">What is inside</h3>
          <p class="helper">Illustrated steps for macOS installer, EFI, and troubleshooting tips.</p>
          <div class="helper">Includes kext selection, ProperTree cleanup, and post-install configuration.</div>
        </div>
      </div>
    </section>

    <section id="guide" class="section">
      <h2>Guide Highlights</h2>
      <div class="grid cols-3">
        <div class="card feature"><div class="icon">🧰</div><div><h3>Prerequisites</h3><p>Vista+, 16 GB USB, internet, ethernet for setup.</p></div></div>
        <div class="card feature"><div class="icon">🧪</div><div><h3>Check Compatibility</h3><p>Run OpCore Simplify for highest supported macOS.</p></div></div>
        <div class="card feature"><div class="icon">🔧</div><div><h3>Build EFI</h3><p>Gather kexts, clean config with ProperTree.</p></div></div>
        <div class="card feature"><div class="icon">💿</div><div><h3>Create Installer</h3><p>OpenCorePkg macrecovery + Rufus USB.</p></div></div>
        <div class="card feature"><div class="icon">🖥️</div><div><h3>Install macOS</h3><p>Boot USB, finish setup, copy EFI to disk.</p></div></div>
        <div class="card feature"><div class="icon">✅</div><div><h3>Finish Up</h3><p>Mount and copy working EFI to internal EFI.</p></div></div>
      </div>
    </section>

    <!-- FAQ (restored + improved UI) -->
    <section id="faq" class="section">
      <h2>FAQ</h2>
      <p class="helper" style="margin-top:-6px">Search, filter by category, and click the plus to open answers.</p>

      <div class="card">
        <div class="faq-toolbar">
          <input id="faq-search" class="search" type="search" placeholder="Search FAQ (e.g., Wi-Fi, USB, EFI)…">
          <div id="chips" style="display:flex;gap:8px;flex-wrap:wrap">
            <button class="chip active" data-chip="all" type="button">All</button>
            <button class="chip" data-chip="setup" type="button">Setup</button>
            <button class="chip" data-chip="network" type="button">Network</button>
            <button class="chip" data-chip="troubleshoot" type="button">Troubleshoot</button>
          </div>
          <div id="count" class="helper" style="margin-left:auto">Showing 6</div>
        </div>

        <div id="faq-list" class="faq-wrap" aria-live="polite">
          <!-- 1 -->
          <article class="faq-item" data-cat="setup" data-keywords="prerequisites usb ethernet windows vista requirements">
            <header class="faq-q" tabindex="0" role="button" aria-expanded="false">
              <div>
                <h3>What do I need before starting?</h3>
                <div class="meta"><span>Setup</span></div>
              </div>
              <span class="plus" aria-hidden="true">＋</span>
            </header>
            <div class="faq-content">
              <div class="faq-a"><p>Windows Vista or newer, 16 GB+ USB, reliable internet, and ideally ethernet for the installer.</p></div>
            </div>
          </article>

          <!-- 2 -->
          <article class="faq-item" data-cat="setup" data-keywords="compatibility supported macos version opencore simplify hardware">
            <header class="faq-q" tabindex="0" role="button" aria-expanded="false">
              <div>
                <h3>Which macOS version can I run?</h3>
                <div class="meta"><span>Setup</span></div>
              </div>
              <span class="plus" aria-hidden="true">＋</span>
            </header>
            <div class="faq-content">
              <div class="faq-a"><p>Run OpCore Simplify and choose the highest <em>Supported macOS Version</em> it reports for your hardware.</p></div>
            </div>
          </article>

          <!-- 3 -->
          <article class="faq-item" data-cat="troubleshoot" data-keywords="unsupported hardware troubleshoot stability">
            <header class="faq-q" tabindex="0" role="button" aria-expanded="false">
              <div>
                <h3>Something shows unsupported</h3>
                <div class="meta"><span>Troubleshoot</span></div>
              </div>
              <span class="plus" aria-hidden="true">＋</span>
            </header>
            <div class="faq-content">
              <div class="faq-a"><p>That machine may not be ideal. You can try alternate kexts, but expect possible instability.</p></div>
            </div>
          </article>

          <!-- 4 -->
          <article class="faq-item" data-cat="network" data-keywords="wifi ethernet network kexts internet">
            <header class="faq-q" tabindex="0" role="button" aria-expanded="false">
              <div>
                <h3>Do I need Wi-Fi?</h3>
                <div class="meta"><span>Network</span></div>
              </div>
              <span class="plus" aria-hidden="true">＋</span>
            </header>
            <div class="faq-content">
              <div class="faq-a"><p>Use ethernet during install. Wi-Fi depends on your chipset and kexts; enable it after macOS is installed.</p></div>
            </div>
          </article>

          <!-- 5 -->
          <article class="faq-item" data-cat="setup" data-keywords="usb reuse reformat installer drive backup efi">
            <header class="faq-q" tabindex="0" role="button" aria-expanded="false">
              <div>
                <h3>Can I reuse the USB later?</h3>
                <div class="meta"><span>Setup</span></div>
              </div>
              <span class="plus" aria-hidden="true">＋</span>
            </header>
            <div class="faq-content">
              <div class="faq-a"><p>Yes—reformat it after setup. Be sure to back up your working EFI first.</p></div>
            </div>
          </article>

          <!-- 6 -->
          <article class="faq-item" data-cat="troubleshoot" data-keywords="help guide dortania motherboard resources">
            <header class="faq-q" tabindex="0" role="button" aria-expanded="false">
              <div>
                <h3>Where can I get deeper help?</h3>
                <div class="meta"><span>Troubleshoot</span></div>
              </div>
              <span class="plus" aria-hidden="true">＋</span>
            </header>
            <div class="faq-content">
              <div class="faq-a"><p>See Dortania’s OpenCore Install Guide and your motherboard’s community resources.</p></div>
            </div>
          </article>
        </div>
      </div>
    </section>

    <!-- Contact (mail) — restored card with gradient frame, inline validation, counters, toast states -->
    <section id="ask" class="section">
      <h2>Ask Banana Tech a Question</h2>
      <p class="helper" style="margin-top:-6px">This panel keeps your original look but tightens spacing and adds feedback.</p>

      <div class="contact-card">
        <div class="contact-inner">
          <div class="contact-grid">
            <form id="question-form" class="form" action="https://formspree.io/f/xkgzeaag" method="POST" novalidate>
              <div class="field-row">
                <div>
                  <label for="name">Name</label>
                  <input id="name" name="name" class="input" type="text" placeholder="Your name" required>
                </div>
                <div>
                  <label for="email">Email</label>
                  <input id="email" name="email" class="input" type="email" placeholder="you@example.com" required>
                </div>
              </div>

              <div>
                <label for="question">Your Question</label>
                <textarea id="question" name="question" rows="6" placeholder="Describe the problem and what you tried..." required maxlength="2000"></textarea>
                <div style="display:flex;justify-content:space-between;align-items:center;margin-top:6px">
                  <div class="helper">Tip: include CPU, GPU, and motherboard.</div>
                  <div class="counter"><span id="chars">0</span>/2000</div>
                </div>
              </div>

              <!-- Hidden fields and honeypot -->
              <input type="hidden" name="_subject" value="Banana Tech — New Question">
              <input type="hidden" name="page" value="bananatechhackintosh.github.io">
              <input type="text" name="_gotcha" style="display:none">

              <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap">
                <button id="submit-btn" class="btn send" type="submit"><span class="spin" aria-hidden="true"></span> Submit</button>
                <span id="form-success" class="status ok" hidden>Thanks. We got your message.</span>
                <span id="form-error" class="status err" hidden>Could not send. Please try again.</span>
                <a class="pill" href="mailto:hello@bananatech.example?subject=Hackintosh%20question">Email instead</a>
              </div>
            </form>

            <!-- Side info panel -->
            <aside class="card" aria-label="Contact info">
              <h3 style="margin-top:0">Faster replies</h3>
              <ul style="margin:0;padding-left:18px;color:#cbd5e1">
                <li>Add exact motherboard and BIOS version</li>
                <li>CPU and iGPU/dGPU model</li>
                <li>macOS version you target</li>
                <li>Attach short EFI folder tree if possible</li>
              </ul>
              <hr style="border:0;border-top:1px solid rgba(229,231,235,.10);margin:14px 0">
              <div class="helper">We reply by email. No spam. Your info stays private.</div>
            </aside>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="container">
    <div>© Banana Tech — Built with ❤️</div>
    <div style="margin-top:12px;display:flex;gap:10px;flex-wrap:wrap">
      <a class="btn" href="about.html">About</a>
      <a class="btn" href="privacy.html">Privacy Policy</a>
      <a class="btn" href="terms.html">Terms of Service</a>
    </div>
  </footer>

  <a href="#top" class="to-top" id="toTop" aria-label="Back to top">↑</a>

  <script>
    // back-to-top
    const toTop=document.getElementById('toTop');
    addEventListener('scroll',()=>{toTop.classList.toggle('show',(window.scrollY||document.documentElement.scrollTop)>600)},{passive:true});

    // smooth internal links
    document.querySelectorAll('a[href^="#"]').forEach(a=>{
      a.addEventListener('click',e=>{
        const t=document.querySelector(a.getAttribute('href'));
        if(t){e.preventDefault();t.scrollIntoView({behavior:'smooth',block:'start'});}
      });
    });

    // FAQ: open/close + smooth height + search highlight + chips
    const faqList = document.getElementById('faq-list');
    const searchEl = document.getElementById('faq-search');
    const countEl = document.getElementById('count');
    const chipsWrap = document.getElementById('chips');
    let activeCat = 'all';

    function setMaxHeight(item, open){
      const box=item.querySelector('.faq-content'); if(!box) return;
      if(open){ box.style.maxHeight = box.scrollHeight+'px'; }
      else { box.style.maxHeight = '0px'; }
    }

    function toggleItem(item){
      const open = !item.classList.contains('open');
      item.classList.toggle('open', open);
      item.querySelector('.faq-q')?.setAttribute('aria-expanded', String(open));
      const plus = item.querySelector('.plus'); if(plus) plus.textContent = open ? '–' : '＋';
      setMaxHeight(item, open);
    }

    faqList.querySelectorAll('.faq-item').forEach(item=>{
      const q=item.querySelector('.faq-q');
      const plus=item.querySelector('.plus');
      q.addEventListener('click',()=>toggleItem(item));
      q.addEventListener('keydown',e=>{ if(e.key===' '||e.key==='Enter'){ e.preventDefault(); toggleItem(item);} });
      if(plus){ plus.style.cursor='pointer'; plus.addEventListener('click',e=>{ e.stopPropagation(); toggleItem(item); }); }
      setMaxHeight(item, false);
    });

    function escapeRegExp(s){return s.replace(/[.*+?^${}()|[\]\\]/g,'\\$&');}
    function highlight(el, q){
      const content=el.innerText; if(!q){ el.innerHTML = el.innerHTML; return; }
      const re=new RegExp('('+escapeRegExp(q)+')','ig');
      const walker=document.createTreeWalker(el, NodeFilter.SHOW_TEXT, null);
      const nodes=[];
      while(walker.nextNode()) nodes.push(walker.currentNode);
      nodes.forEach(node=>{
        if(!node.nodeValue.trim()) return;
        const span=document.createElement('span');
        span.innerHTML=node.nodeValue.replace(re,'<mark>$1</mark>');
        node.parentNode.replaceChild(span, node);
      });
    }

    function filterFaq(){
      const q=(searchEl.value||'').trim().toLowerCase();
      let shown=0, last=null;
      faqList.querySelectorAll('.faq-item').forEach(item=>{
        // reset previous highlights
        item.querySelectorAll('mark').forEach(m=>{ const text=document.createTextNode(m.textContent); m.parentNode.replaceChild(text,m); });

        const cat=item.getAttribute('data-cat');
        const keys=(item.getAttribute('data-keywords')||'').toLowerCase();
        const qText=(item.querySelector('.faq-q h3')?.textContent||'').toLowerCase();
        const aText=(item.querySelector('.faq-a')?.textContent||'').toLowerCase();
        const catOk = (activeCat==='all') || (cat===activeCat);
        const hit = !q || qText.includes(q) || aText.includes(q) || keys.includes(q);
        const show = catOk && hit;
        item.style.display = show ? '' : 'none';
        if(show){ shown++; last=item; }

        if(q && show){
          highlight(item.querySelector('.faq-q h3'), q);
          highlight(item.querySelector('.faq-a'), q);
        }

        // collapse items when filtering
        if(!q){ item.classList.remove('open'); setMaxHeight(item,false); }
      });
      countEl.textContent = `Showing ${shown}`;
      if(q && shown===1 && last){ last.classList.add('open'); setMaxHeight(last,true); last.querySelector('.plus').textContent='–'; }
    }
    searchEl.addEventListener('input', filterFaq);

    chipsWrap.addEventListener('click', (e)=>{
      const btn=e.target.closest('.chip'); if(!btn) return;
      chipsWrap.querySelectorAll('.chip').forEach(c=>c.classList.remove('active'));
      btn.classList.add('active');
      activeCat = btn.getAttribute('data-chip');
      filterFaq();
    });

    // Contact form: inline validation, character counter, toast states
    const form = document.getElementById('question-form');
    const btn  = document.getElementById('submit-btn');
    const ok   = document.getElementById('form-success');
    const err  = document.getElementById('form-error');
    const emailField = document.getElementById('email');
    const qField     = document.getElementById('question');
    const charsEl    = document.getElementById('chars');
    const emailRe=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;

    function updateCount(){ charsEl.textContent = (qField.value||'').length; }
    qField.addEventListener('input', updateCount); updateCount();

    form.addEventListener('submit', async (e)=>{
      e.preventDefault(); ok.hidden=true; err.hidden=true;
      if(!form.checkValidity()){ form.reportValidity(); return; }
      const email=(emailField.value||'').trim();
      if(!emailRe.test(email)){ emailField.setCustomValidity('Enter a valid email like name@example.com'); emailField.reportValidity(); emailField.setCustomValidity(''); return; }

      btn.disabled=true; form.classList.add('sending'); btn.querySelector('.spin').style.display='inline-block';

      try{
        const res = await fetch(form.action,{ method:'POST', headers:{'Accept':'application/json'}, body:new FormData(form) });
        if(res.ok){
          form.reset(); updateCount(); ok.hidden=false;
        }else{
          const data=await res.json().catch(()=>null);
          err.textContent = (data && data.errors && data.errors[0] && data.errors[0].message) ? data.errors[0].message : 'Something went wrong. Please try again.';
          err.hidden=false;
        }
      }catch{
        err.textContent='Network error. Please try again.'; err.hidden=false;
      }finally{
        btn.disabled=false; form.classList.remove('sending'); btn.querySelector('.spin').style.display='none';
      }
    });
  </script>
</body>
</html>
